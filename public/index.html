<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PromPort - Prometheus Export/Import</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="container">
      <div class="app-wrapper">
        <div class="header">
          <div class="logo">
            <h1>PromPort</h1>
          </div>
          <p>Prometheus Metrics Export & Import Tool</p>
        </div>

        <div class="card">
          <div class="tabs">
            <button class="tab active" onclick="switchTab('export')">
              üì§ Export Metrics
            </button>
            <button class="tab" onclick="switchTab('import')">
              üì• Import Metrics
            </button>
          </div>

          <!-- Export Tab -->
          <div id="export-tab" class="tab-content active">
            <div class="info-box">
              ‚ÑπÔ∏è Select metrics and time range to export from Prometheus TSDB
            </div>

            <div class="form-group">
              <label>Search Metrics</label>
              <div class="search-box">
                <input
                  type="text"
                  id="metric-search"
                  placeholder="Search metrics..."
                  oninput="filterMetrics()"
                />
                <span class="search-icon">üîç</span>
              </div>
            </div>

            <div class="form-group">
              <label>Available Metrics</label>
              <div class="metrics-container" id="metrics-container">
                <div class="loading active">
                  <div class="spinner"></div>
                  Loading metrics...
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Time Range (Optional)</label>
              <div class="time-presets">
                <button
                  class="time-preset-btn"
                  onclick="setTimeRange(1, 'hour')"
                >
                  Last 1 Hour
                </button>
                <button
                  class="time-preset-btn"
                  onclick="setTimeRange(1, 'day')"
                >
                  Last 1 Day
                </button>
                <button
                  class="time-preset-btn"
                  onclick="setTimeRange(3, 'day')"
                >
                  Last 3 Days
                </button>
                <button
                  class="time-preset-btn"
                  onclick="setTimeRange(7, 'day')"
                >
                  Last 7 Days
                </button>
              </div>
              <div class="datetime-group">
                <div>
                  <label>Start Time</label>
                  <input
                    type="datetime-local"
                    id="min-time"
                    onchange="updateExportFilename()"
                  />
                </div>
                <div>
                  <label>End Time</label>
                  <input
                    type="datetime-local"
                    id="max-time"
                    onchange="updateExportFilename()"
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Output File Path</label>
              <div class="file-input-group">
                <input
                  type="text"
                  id="output-path"
                  value="/tmp/prom_dump.txt"
                  placeholder="/tmp/prom_dump.txt"
                />
                <button
                  class="file-btn"
                  onclick="document.getElementById('export-file-selector').click()"
                >
                  üìÅ Browse
                </button>
                <input
                  type="file"
                  id="export-file-selector"
                  style="display: none"
                  accept=".json,.txt"
                  onchange="handleExportFileSelect(event)"
                  nwsaveas="export.json"
                />
              </div>
            </div>

            <div class="alert-container">
              <div class="alert" id="export-alert"></div>
              <button class="btn" onclick="exportMetrics()">
                Export Metrics
              </button>
            </div>
          </div>

          <!-- Import Tab -->
          <div id="import-tab" class="tab-content">
            <div class="info-box">
              ‚ÑπÔ∏è Import previously exported metrics back into Prometheus TSDB
            </div>

            <div class="form-group">
              <label>Input File Path</label>
              <div class="file-input-group">
                <input
                  type="text"
                  id="input-path"
                  placeholder="/tmp/prom_dump.txt"
                />
                <button
                  class="file-btn"
                  onclick="document.getElementById('import-file-selector').click()"
                >
                  üìÅ Browse
                </button>
                <input
                  type="file"
                  id="import-file-selector"
                  style="display: none"
                  accept=".json,.txt"
                  onchange="handleImportFileSelect(event)"
                />
              </div>
            </div>

            <div class="alert-container">
              <div class="alert" id="import-alert"></div>
              <button class="btn" onclick="importMetrics()">
                Import Metrics
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
